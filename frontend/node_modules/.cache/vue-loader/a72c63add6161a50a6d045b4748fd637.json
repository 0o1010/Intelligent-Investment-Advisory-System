{"remainingRequest":"/Users/chenxuran/PycharmProjects/platform/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenxuran/PycharmProjects/platform/frontend/src/components/Visualization.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenxuran/PycharmProjects/platform/frontend/src/components/Visualization.vue","mtime":1750735877623},{"path":"/Users/chenxuran/PycharmProjects/platform/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1750475024166},{"path":"/Users/chenxuran/PycharmProjects/platform/frontend/node_modules/babel-loader/lib/index.js","mtime":1750475024314},{"path":"/Users/chenxuran/PycharmProjects/platform/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1750475024166},{"path":"/Users/chenxuran/PycharmProjects/platform/frontend/node_modules/vue-loader/lib/index.js","mtime":1750475024342}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBFQ2hhcnQgZnJvbSAidnVlLWVjaGFydHMiOwppbXBvcnQgImVjaGFydHMvbGliL2NoYXJ0L2NhbmRsZXN0aWNrIjsKaW1wb3J0ICJlY2hhcnRzL2xpYi9jb21wb25lbnQvdG9vbHRpcCI7CmltcG9ydCAiZWNoYXJ0cy9saWIvY29tcG9uZW50L3RpdGxlIjsKaW1wb3J0ICJlY2hhcnRzL2xpYi9jb21wb25lbnQvZ3JpZCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiVmlzdWFsaXphdGlvbiIsCgogICAgY29tcG9uZW50czogewogICAgICAgICJlLWNoYXJ0cyI6IEVDaGFydCwKICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG1vZGVsOiAnJywKICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgICAgICAgIG1vZGVsczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnR1JVJywKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ0dSVScKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ0xTVE0nLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnTFNUTScKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ1JOTicsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdSTk4nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGNvZGU6ICcnLAogICAgICAgICAgICBsb2FkaW5nQ29kZXM6IGZhbHNlLAogICAgICAgICAgICBjb2RlczogW10sCiAgICAgICAgICAgIHBpY2tlck9wdGlvbnM6IHsKICAgICAgICAgICAgICAgIGRpc2FibGVkRGF0ZSh0aW1lKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRpbWUuZ2V0VGltZSgpID4gRGF0ZS5ub3coKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzaG9ydGN1dHM6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdIYWxmIHllYXInLAogICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrKHBpY2tlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0LnNldFRpbWUoc3RhcnQuZ2V0VGltZSgpIC0gMzYwMCAqIDEwMDAgKiAyNCAqIDE4MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaWNrZXIuJGVtaXQoJ3BpY2snLCBbc3RhcnQsIGVuZF0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdPbmUgeWVhcicsCiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2socGlja2VyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQuc2V0VGltZShzdGFydC5nZXRUaW1lKCkgLSAzNjAwICogMTAwMCAqIDI0ICogMzY1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpY2tlci4kZW1pdCgncGljaycsIFtzdGFydCwgZW5kXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1RocmVlIHllYXJzJywKICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljayhwaWNrZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydC5zZXRUaW1lKHN0YXJ0LmdldFRpbWUoKSAtIDM2MDAgKiAxMDAwICogMjQgKiAzNjUgKiAzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpY2tlci4kZW1pdCgncGljaycsIFtzdGFydCwgZW5kXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBzZWFyY2hEYXRlOiAnJywKICAgICAgICAgICAgZGVmYXVsdENhbGVuZGFyOiBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldE1vbnRoKG5ldyBEYXRlKCkuZ2V0TW9udGgoKSAtIDEpKSwKICAgICAgICAgICAgZW1wdHlDaGFydE9wdGlvbjogewogICAgICAgICAgICAgICAgdGl0bGU6IHsKICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiRVRGIGhpc3RvcnkgcHJpY2UgY2hhcnQiLAogICAgICAgICAgICAgICAgICAgIGxlZnQ6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHRvb2x0aXA6IHsKICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAiYXhpcyIsCiAgICAgICAgICAgICAgICAgICAgYXhpc1BvaW50ZXI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImNyb3NzIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHhBeGlzOiB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImNhdGVnb3J5IiwKICAgICAgICAgICAgICAgICAgICBkYXRhOiBbXSwKICAgICAgICAgICAgICAgICAgICBzY2FsZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBib3VuZGFyeUdhcDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgYXhpc0xpbmU6IHtvblplcm86IGZhbHNlfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB5QXhpczogewogICAgICAgICAgICAgICAgICAgIHNjYWxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHNwbGl0QXJlYToge3Nob3c6IHRydWV9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGdyaWQ6IHsKICAgICAgICAgICAgICAgICAgICBsZWZ0OiAiMTAlIiwKICAgICAgICAgICAgICAgICAgICByaWdodDogIjEwJSIsCiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAiMTUlIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzZXJpZXM6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICJDbG9zZSBwcmljZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJsaW5lIiwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogW10sCiAgICAgICAgICAgICAgICAgICAgICAgIHNtb290aDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1N5bWJvbDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNoYXJ0T3B0aW9uOiB7fSwKICAgICAgICB9CiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICByZXNldCgpIHsKICAgICAgICAgICAgdGhpcy5jb2RlID0gJycKICAgICAgICAgICAgdGhpcy5tb2RlbCA9ICcnCiAgICAgICAgICAgIHRoaXMuc2VhcmNoRGF0ZSA9ICcnCiAgICAgICAgICAgIHRoaXMuY2hhcnRPcHRpb24gPSB0aGlzLmVtcHR5Q2hhcnRPcHRpb24KICAgICAgICB9LAogICAgICAgIHZhbGlkYXRlRGF0ZVJhbmdlKGRhdGVzKSB7CiAgICAgICAgICAgIGlmICghZGF0ZXMgfHwgZGF0ZXMubGVuZ3RoICE9PSAyKSByZXR1cm47CgogICAgICAgICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSBkYXRlcy5tYXAoZGF0ZSA9PiBuZXcgRGF0ZShkYXRlKSk7CiAgICAgICAgICAgIGNvbnN0IGRpZmZJbkRheXMgPSAoZW5kIC0gc3RhcnQpIC8gKDEwMDAgKiAzNjAwICogMjQpOwoKICAgICAgICAgICAgaWYgKGRpZmZJbkRheXMgPCA5MCkgewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCdQbGVhc2Ugc2VsZWN0IGEgZGF0ZSByYW5nZSBvZiBhdCBsZWFzdCA5MCBkYXlzLicpOwogICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hEYXRlID0gJyc7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGZldGNoRVRGTGlzdCgpIHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nQ29kZXMgPSB0cnVlOwogICAgICAgICAgICB0aGlzLiRheGlvcy5nZXQodGhpcy4kaHR0cFVybCArICcvZ2V0QWxsRVRGJykKICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuZGF0YSkKICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2RlcyA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFF1ZXJ5ID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigiRmFpbGVkIHRvIGxvYWQgRVRGIGxpc3QuIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigiRXJyb3Igd2hpbGUgZmV0Y2hpbmcgRVRGIGxpc3QuIik7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZ0NvZGVzID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGRlYm91bmNlKGZ1bmMsIHdhaXQpIHsKICAgICAgICAgICAgbGV0IHRpbWVvdXQ7CiAgICAgICAgICAgIHJldHVybiAoLi4uYXJncykgPT4gewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpOwogICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gZnVuYy5hcHBseSh0aGlzLCBhcmdzKSwgd2FpdCk7CiAgICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVEcm9wZG93blZpc2libGUodmFsKSB7CiAgICAgICAgICAgIGlmICh2YWwpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUXVlcnkgPSB0aGlzLmNvZGVzOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgbG9hZEdldCgpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmNvZGUgfHwgIXRoaXMuc2VhcmNoRGF0ZSB8fCB0aGlzLnNlYXJjaERhdGUubGVuZ3RoIDwgMikgewogICAgICAgICAgICAgICAgdGhpcy5jaGFydE9wdGlvbiA9IHRoaXMuZW1wdHlDaGFydE9wdGlvbjsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKCiAgICAgICAgICAgIHRoaXMuJGF4aW9zLmdldCh0aGlzLiRodHRwVXJsICsgJy9nZXRQcmljZScsIHsKICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLAogICAgICAgICAgICAgICAgICAgIGNvZGU6IHRoaXMuY29kZSwKICAgICAgICAgICAgICAgICAgICBzdGFydF9kYXRlOiB0aGlzLnNlYXJjaERhdGVbMF0sCiAgICAgICAgICAgICAgICAgICAgZW5kX2RhdGU6IHRoaXMuc2VhcmNoRGF0ZVsxXSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihyZXMgPT4gcmVzLmRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhaW4gPSByZXMuZGF0YS50cmFpbjsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxpZCA9IHJlcy5kYXRhLnZhbGlkOwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBjbG9zZVByaWNlID0gdHJhaW4ubWFwKGl0ZW0gPT4gaXRlbS5jbG9zZSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlZGljdGVkUHJpY2UgPSB2YWxpZC5tYXAoaXRlbSA9PiBpdGVtLlByZWRpY3Rpb24pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVMYWJlbHMgPSB2YWxpZC5tYXAoaXRlbSA9PiBpdGVtLmRhdGUpOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJ0T3B0aW9uID0gewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5jb2RlICsgIiBoaXN0b3J5IGFuZCBwcmVkaWN0aW9uIGNoYXJ0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAxOAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAiYXhpcyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzUG9pbnRlcjoge3R5cGU6ICJjcm9zcyJ9LAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBsZWdlbmQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFsiQWN0dWFsIENsb3NlIiwgIlByZWRpY3RlZCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiA1MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICJjZW50ZXIiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICIxMCUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICIxMCUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAiMTUlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogOTAKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgeEF4aXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjYXRlZ29yeSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRlTGFiZWxzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3VuZGFyeUdhcDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzTGluZToge29uWmVybzogZmFsc2V9LAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB5QXhpczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxpdEFyZWE6IHtzaG93OiB0cnVlfSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogIkFjdHVhbCBDbG9zZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGNsb3NlUHJpY2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc21vb3RoOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTeW1ib2w6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVTdHlsZToge3dpZHRoOiAyfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogIlByZWRpY3RlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImxpbmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHByZWRpY3RlZFByaWNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNtb290aDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93U3ltYm9sOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lU3R5bGU6IHt3aWR0aDogMn0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFydE9wdGlvbiA9IHRoaXMuZW1wdHlDaGFydE9wdGlvbjsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmV0Y2ggaGlzdG9yaWNhbCBwcmljZXMgZmFpbGVkJykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIHRoaXMuZmlsdGVyRVRGID0gdGhpcy5kZWJvdW5jZSh0aGlzLmZpbHRlckVURiwgMjAwKTsKICAgIH0sCgogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmZldGNoRVRGTGlzdCgpCiAgICAgICAgdGhpcy5sb2FkR2V0KCk7CiAgICB9LAogICAgYmVmb3JlTW91bnQoKSB7CiAgICAgICAgdGhpcy5sb2FkR2V0KCkKICAgIH0KfQo="},{"version":3,"sources":["Visualization.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Visualization.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <div style=\"margin-bottom: 5px\">\n            <el-select v-model=\"model\" filterable placeholder=\"Select a NN model\" style=\"margin-left: 5px\">\n                <el-option\n                    v-for=\"item in models\"\n                    :key=\"item.value\"\n                    :label=\"item.label\"\n                    :value=\"item.value\">\n                </el-option>\n            </el-select>\n            <el-select\n                v-model=\"code\"\n                filterable\n                clearable\n                placeholder=\"Choose an ETF\"\n                style=\"margin-left: 5px\"\n                :loading=\"loadingCodes\"\n                :loading-text=\"'Loading...'\"\n                :no-match-text=\"'No matching ETF'\"\n                @visible-change=\"handleDropdownVisible\"\n            >\n                <el-option\n                    v-for=\"item in codes\"\n                    :key=\"item.value\"\n                    :label=\"item.label\"\n                    :value=\"item.value\"\n                />\n            </el-select>\n\n\n            <el-date-picker\n                style=\"margin-left: 5px\"\n                v-model=\"searchDate\"\n                type=\"daterange\"\n                :picker-options=\"pickerOptions\"\n                :default-value=\"defaultCalendar\"\n                format=\"yyyy-MM-dd\"\n                value-format=\"yyyy-MM-dd\"\n                range-separator=\"to\"\n                start-placeholder=\"start date\"\n                end-placeholder=\"end date\"\n                align=\"right\"\n                @change=\"validateDateRange\"\n            />\n\n            <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"loadGet\" icon=\"el-icon-search\">Show</el-button>\n            <el-button type=\"success\" @click=\"reset\" icon=\"el-icon-refresh\">Reset</el-button>\n\n            <el-card :body-style=\"{ padding: '20px' }\" v-loading=\"loading\" style=\"margin-top: 10px\">\n                <e-charts\n                    class=\"chart\"\n                    :option=\"chartOption\"\n                    :autoresize=\"true\"\n                    style=\"height: 600px;\"\n                />\n            </el-card>\n\n\n        </div>\n\n    </div>\n</template>\n\n<script>\nimport EChart from \"vue-echarts\";\nimport \"echarts/lib/chart/candlestick\";\nimport \"echarts/lib/component/tooltip\";\nimport \"echarts/lib/component/title\";\nimport \"echarts/lib/component/grid\";\n\nexport default {\n    name: \"Visualization\",\n\n    components: {\n        \"e-charts\": EChart,\n    },\n    data() {\n        return {\n            model: '',\n            loading: false,\n            models: [\n                {\n                    value: 'GRU',\n                    label: 'GRU'\n                }, {\n                    value: 'LSTM',\n                    label: 'LSTM'\n                }, {\n                    value: 'RNN',\n                    label: 'RNN'\n                }\n            ],\n            code: '',\n            loadingCodes: false,\n            codes: [],\n            pickerOptions: {\n                disabledDate(time) {\n                    return time.getTime() > Date.now();\n                },\n                shortcuts: [\n                    {\n                        text: 'Half year',\n                        onClick(picker) {\n                            const end = new Date();\n                            const start = new Date();\n                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 180);\n                            picker.$emit('pick', [start, end]);\n                        }\n                    },\n                    {\n                        text: 'One year',\n                        onClick(picker) {\n                            const end = new Date();\n                            const start = new Date();\n                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 365);\n                            picker.$emit('pick', [start, end]);\n                        }\n                    },\n                    {\n                        text: 'Three years',\n                        onClick(picker) {\n                            const end = new Date();\n                            const start = new Date();\n                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 365 * 3);\n                            picker.$emit('pick', [start, end]);\n                        }\n                    }\n                ]\n            },\n\n            searchDate: '',\n            defaultCalendar: new Date(new Date().setMonth(new Date().getMonth() - 1)),\n            emptyChartOption: {\n                title: {\n                    text: \"ETF history price chart\",\n                    left: \"center\",\n                },\n                tooltip: {\n                    trigger: \"axis\",\n                    axisPointer: {\n                        type: \"cross\",\n                    },\n                },\n                xAxis: {\n                    type: \"category\",\n                    data: [],\n                    scale: true,\n                    boundaryGap: false,\n                    axisLine: {onZero: false},\n                },\n                yAxis: {\n                    scale: true,\n                    splitArea: {show: true},\n                },\n                grid: {\n                    left: \"10%\",\n                    right: \"10%\",\n                    bottom: \"15%\",\n                },\n                series: [\n                    {\n                        name: \"Close price\",\n                        type: \"line\",\n                        data: [],\n                        smooth: true,\n                        showSymbol: false,\n                        lineStyle: {\n                            width: 2,\n                        },\n                    },\n                ],\n            },\n            chartOption: {},\n        }\n    },\n\n    methods: {\n        reset() {\n            this.code = ''\n            this.model = ''\n            this.searchDate = ''\n            this.chartOption = this.emptyChartOption\n        },\n        validateDateRange(dates) {\n            if (!dates || dates.length !== 2) return;\n\n            const [start, end] = dates.map(date => new Date(date));\n            const diffInDays = (end - start) / (1000 * 3600 * 24);\n\n            if (diffInDays < 90) {\n                this.$message.warning('Please select a date range of at least 90 days.');\n                this.searchDate = '';\n            }\n        },\n        fetchETFList() {\n            this.loadingCodes = true;\n            this.$axios.get(this.$httpUrl + '/getAllETF')\n                .then(res => res.data)\n                .then(res => {\n                    if (res.code === 200) {\n                        this.codes = res.data;\n                        this.searchQuery = res.data;\n                    } else {\n                        this.$message.error(\"Failed to load ETF list.\");\n                    }\n                })\n                .catch(() => {\n                    this.$message.error(\"Error while fetching ETF list.\");\n                })\n                .finally(() => {\n                    this.loadingCodes = false;\n                });\n        },\n        debounce(func, wait) {\n            let timeout;\n            return (...args) => {\n                clearTimeout(timeout);\n                timeout = setTimeout(() => func.apply(this, args), wait);\n            };\n        },\n        handleDropdownVisible(val) {\n            if (val) {\n                this.searchQuery = this.codes;\n            }\n        },\n\n        loadGet() {\n            if (!this.code || !this.searchDate || this.searchDate.length < 2) {\n                this.chartOption = this.emptyChartOption;\n                return;\n            }\n\n            this.loading = true;\n\n            this.$axios.get(this.$httpUrl + '/getPrice', {\n                params: {\n                    model: this.model,\n                    code: this.code,\n                    start_date: this.searchDate[0],\n                    end_date: this.searchDate[1],\n                }\n            }).then(res => res.data).then(res => {\n                if (res.code === 200) {\n                    const train = res.data.train;\n                    const valid = res.data.valid;\n\n                    const closePrice = train.map(item => item.close);\n                    const predictedPrice = valid.map(item => item.Prediction);\n                    const dateLabels = valid.map(item => item.date);\n\n                    this.chartOption = {\n                        title: {\n                            text: this.code + \" history and prediction chart\",\n                            left: \"center\",\n                            top: 10,\n                            textStyle: {\n                                fontSize: 18\n                            }\n                        },\n                        tooltip: {\n                            trigger: \"axis\",\n                            axisPointer: {type: \"cross\"},\n                        },\n                        legend: {\n                            data: [\"Actual Close\", \"Predicted\"],\n                            top: 50,\n                            left: \"center\"\n                        },\n                        grid: {\n                            left: \"10%\",\n                            right: \"10%\",\n                            bottom: \"15%\",\n                            top: 90\n                        },\n                        xAxis: {\n                            type: \"category\",\n                            data: dateLabels,\n                            scale: true,\n                            boundaryGap: false,\n                            axisLine: {onZero: false},\n                        },\n                        yAxis: {\n                            scale: true,\n                            splitArea: {show: true},\n                        },\n                        series: [\n                            {\n                                name: \"Actual Close\",\n                                type: \"line\",\n                                data: closePrice,\n                                smooth: true,\n                                showSymbol: false,\n                                lineStyle: {width: 2},\n                            },\n                            {\n                                name: \"Predicted\",\n                                type: \"line\",\n                                data: predictedPrice,\n                                smooth: true,\n                                showSymbol: false,\n                                lineStyle: {width: 2},\n                            }\n                        ],\n                    };\n                } else {\n                    this.chartOption = this.emptyChartOption;\n                    console.log('Fetch historical prices failed')\n                }\n            }).finally(() => {\n                this.loading = false;\n            });\n        }\n\n    },\n    created() {\n        this.filterETF = this.debounce(this.filterETF, 200);\n    },\n\n    mounted() {\n        this.fetchETFList()\n        this.loadGet();\n    },\n    beforeMount() {\n        this.loadGet()\n    }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}