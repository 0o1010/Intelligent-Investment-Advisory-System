{"remainingRequest":"/Users/chenxuran/PycharmProjects/platform/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenxuran/PycharmProjects/platform/frontend/src/components/LLM.vue?vue&type=style&index=0&id=5468f326&scoped=true&lang=css&","dependencies":[{"path":"/Users/chenxuran/PycharmProjects/platform/frontend/src/components/LLM.vue","mtime":1750473790970},{"path":"/Users/chenxuran/PycharmProjects/platform/frontend/node_modules/css-loader/dist/cjs.js","mtime":1750470386569},{"path":"/Users/chenxuran/PycharmProjects/platform/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1750470386772},{"path":"/Users/chenxuran/PycharmProjects/platform/frontend/node_modules/postcss-loader/src/index.js","mtime":1750470386615},{"path":"/Users/chenxuran/PycharmProjects/platform/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1750470386460},{"path":"/Users/chenxuran/PycharmProjects/platform/frontend/node_modules/vue-loader/lib/index.js","mtime":1750470386649}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jaGF0LWNvbnRhaW5lciB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgIGhlaWdodDogODB2aDsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7Cn0KCi5jaGF0LWJveCB7CiAgICBmbGV4OiAxOwogICAgb3ZlcmZsb3cteTogYXV0bzsKICAgIHBhZGRpbmc6IDIwcHg7CiAgICBiYWNrZ3JvdW5kOiAjZmZmOwogICAgbWFyZ2luOiAxMHB4OwogICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7Cn0KCi5jaGF0LW1lc3NhZ2UgewogICAgbWFyZ2luLWJvdHRvbTogMTVweDsKICAgIGxpbmUtaGVpZ2h0OiAxLjU7Cn0KCi5jaGF0LW1lc3NhZ2UudXNlciB7CiAgICB0ZXh0LWFsaWduOiByaWdodDsKICAgIGNvbG9yOiAjNDA5RUZGOwp9CgouY2hhdC1tZXNzYWdlLmFzc2lzdGFudCB7CiAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgY29sb3I6ICM2MDYyNjY7Cn0KCi5jaGF0LWlucHV0LWJhciB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIHBhZGRpbmc6IDEwcHg7CiAgICBiYWNrZ3JvdW5kOiAjZmFmYWZhOwogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNkZGQ7Cn0KCi5tb2RlbC1zZWxlY3QgewogICAgd2lkdGg6IDIyMHB4OwogICAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9CgouaW5wdXQtYXJlYSB7CiAgICBmbGV4OiAxOwogICAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9CgoubWFya2Rvd24tYm9keSB7CiAgICBmb250LXNpemU6IDE1cHg7CiAgICBsaW5lLWhlaWdodDogMS42OwogICAgY29sb3I6ICMzMzM7CiAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkOwp9CgoudGhpbmstYmxvY2sgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y2ZjZmNjsKICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICBib3JkZXI6IDFweCBkYXNoZWQgI2QzZDNkMzsKICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7Cn0KCg=="},{"version":3,"sources":["LLM.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2LA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"LLM.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <div style=\"margin-bottom: 5px\">\n\n            <el-select v-model=\"model\" filterable placeholder=\"Select a model\" class=\"model-select\"\n                       style=\"margin-left: 5px; margin-bottom: 10px\" @change=\"onModelChange\">\n                <el-option\n                    v-for=\"item in models\"\n                    :key=\"item.value\"\n                    :label=\"item.label\"\n                    :value=\"item.value\">\n                </el-option>\n            </el-select>\n            <div class=\"chat-container\">\n                <div class=\"chat-box\" ref=\"chatBox\">\n                    <div\n                        v-for=\"(msg, index) in messages\"\n                        :key=\"index\"\n                        :class=\"['chat-message', msg.role]\"\n                    >\n                        <p><strong>{{ msg.role === 'user' ? 'You' : 'Assistant (' + model + ')' }}:</strong>\n                        </p>\n\n                        <template v-if=\"msg.role === 'assistant'\">\n                            <div v-if=\"extractThink(msg.text)\">\n                                <el-button\n                                    type=\"text\"\n                                    size=\"mini\"\n                                    @click=\"msg.showThink = !msg.showThink\"\n                                >\n                                    {{ msg.showThink ? 'Hide thoughts' : 'Show thoughts' }}\n                                </el-button>\n\n                                <el-card\n                                    v-if=\"msg.showThink\"\n                                    class=\"think-block\"\n                                    shadow=\"never\"\n                                >\n                                    <template #header>\n                                        <span style=\"font-size: 13px; color: #999;\">Assistant is thinking...</span>\n                                    </template>\n                                    <div style=\"font-size: 13px;\" v-html=\"marked(extractThink(msg.text))\"/>\n                                </el-card>\n                            </div>\n\n                            <div class=\"markdown-body\" v-html=\"marked(stripThink(msg.text))\"/>\n                        </template>\n\n                        <p v-else>{{ msg.text }}</p>\n                    </div>\n\n                </div>\n\n                <div class=\"chat-input-bar\">\n\n                    <el-input\n                        v-model=\"userInput\"\n                        type=\"textarea\"\n                        :autosize=\"{ minRows: 4, maxRows: 10 }\"\n                        placeholder=\"Please input your question here...\"\n                        class=\"input-area\"\n                        @keydown.enter.native.prevent=\"sendMessage\"\n                    />\n\n                    <el-button type=\"primary\" icon=\"el-icon-s-promotion\" @click=\"sendMessage\">\n                        Send\n                    </el-button>\n                </div>\n            </div>\n        </div>\n\n\n    </div>\n</template>\n\n<script>\nimport {marked} from 'marked';\n\nexport default {\n    name: \"LLM\",\n    data() {\n        return {\n            userInput: '',\n            messages: [],\n            model: '',\n            models: [\n                {\n                    value: 'Meta-Llama-3.1-405B-Instruct',\n                    label: 'Meta-Llama-3.1-405B-Instruct'\n                }, {\n                    value: 'Qwen3-32B',\n                    label: 'Qwen3-32B'\n                }, {\n                    value: 'DeepSeek-R1-0528',\n                    label: 'DeepSeek-R1-0528'\n                },\n            ]\n        }\n    },\n\n    methods: {\n        marked,\n        loadGet() {\n            this.$nextTick(this.scrollToBottom);\n            this.$axios.get(this.$httpUrl + '/load', {\n                params: {\n                    username: sessionStorage.getItem('user'),\n                    model: this.model\n                }\n            }).then(res => res.data).then(res => {\n                this.messages = [];\n                console.log(res)\n                if (res.code === 200) {\n                    console.log(res.data)\n                    for (let i = 0; i < res.data.length; i++) {\n                        this.messages.push({role: 'user', text: res.data[i]['user']});\n                        this.messages.push({role: 'assistant', text: res.data[i]['assistant'], showThink: false});\n                    }\n                } else {\n                    this.messages.push({role: 'assistant', text: 'Error: ' + res.data});\n                }\n                this.$nextTick(this.scrollToBottom);\n            }).catch(() => {\n                this.messages.pop();\n                this.messages.push({role: 'assistant', text: 'Request failed'});\n                this.$nextTick(this.scrollToBottom);\n            });\n        },\n        sendMessage() {\n            if (!this.model || !this.userInput.trim()) {\n                this.$message.warning(\"Please select a model and input your question.\");\n                return;\n            }\n\n            const input = this.userInput.trim();\n\n            this.messages.push({role: 'user', text: input});\n            this.userInput = '';\n\n            this.$nextTick(this.scrollToBottom);\n\n            this.messages.push({role: 'assistant', text: 'Thinking...'});\n\n            this.$axios.get(this.$httpUrl + '/suggest', {\n                params: {\n                    model: this.model,\n                    message: input,\n                    username: sessionStorage.getItem('user')\n                }\n            }).then(res => res.data).then(res => {\n                this.messages.pop();\n                console.log(res)\n                if (res.code === 200) {\n                    this.messages.push({role: 'assistant', text: res.data, showThink: false});\n                } else {\n                    this.messages.push({role: 'assistant', text: 'Error: ' + res.data});\n                }\n                this.$nextTick(this.scrollToBottom);\n            }).catch(() => {\n                this.messages.pop();\n                this.messages.push({role: 'assistant', text: 'Request failed'});\n                this.$nextTick(this.scrollToBottom);\n            });\n        },\n        scrollToBottom() {\n            const chat = this.$refs.chatBox;\n            chat.scrollTop = chat.scrollHeight;\n        },\n        extractThink(text) {\n            const match = text.match(/<think>([\\s\\S]*?)<\\/think>/);\n            return match ? match[1].trim() : null;\n        },\n\n        stripThink(text) {\n            return text.replace(/<think>[\\s\\S]*?<\\/think>/g, '').trim();\n        },\n        onModelChange() {\n            this.messages = [];\n            setTimeout(() => {\n                this.loadGet();\n            }, 100);\n        }\n    },\n}\n</script>\n\n<style scoped>\n.chat-container {\n    display: flex;\n    flex-direction: column;\n    height: 80vh;\n    background-color: #f9f9f9;\n}\n\n.chat-box {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    background: #fff;\n    margin: 10px;\n    border-radius: 10px;\n    border: 1px solid #ddd;\n}\n\n.chat-message {\n    margin-bottom: 15px;\n    line-height: 1.5;\n}\n\n.chat-message.user {\n    text-align: right;\n    color: #409EFF;\n}\n\n.chat-message.assistant {\n    text-align: left;\n    color: #606266;\n}\n\n.chat-input-bar {\n    display: flex;\n    align-items: center;\n    padding: 10px;\n    background: #fafafa;\n    border-top: 1px solid #ddd;\n}\n\n.model-select {\n    width: 220px;\n    margin-right: 10px;\n}\n\n.input-area {\n    flex: 1;\n    margin-right: 10px;\n}\n\n.markdown-body {\n    font-size: 15px;\n    line-height: 1.6;\n    color: #333;\n    word-break: break-word;\n}\n\n.think-block {\n    background-color: #f6f6f6;\n    margin-bottom: 10px;\n    border: 1px dashed #d3d3d3;\n    font-family: 'Courier New', monospace;\n}\n\n</style>\n"]}]}